#include "push_swap.h"

int get_index(int *arr, int number, int length){
  int i = -1;
  while(++i < length)
  {
    if(arr[i] == number)
      return (i);
  }

  return (-1);
}

int main(void) {

  /*int arr[] = {9, 50, 8, 19, 18,17, 28, 46, 25, 11, 29, 30, 45};
  //int sorted_arr[] = {8,9,11,18,19,25,29,30,33,37,45,46};
  int arr_count = 13;*/
  
  /*int arr[] = {45, 32, 4 , 20 , 13 , 1 , 8, 15, 6};
  int sorted_arr[] = {1, 4, 6, 8, 13, 15, 20, 32, 45};
  int arr_count = 9;*/
  
  /*int arr[] = {339,229,202,90,348,368,65,211,10,239,152,232,36,157,183,219,290,18,270,68,39,357,307,191,292,343,120,111,189,93,385,6,328,75,341,253,159,243,87,217,137,293,374,37,22,400,205,41,272,63,228,130,273,161,107,103,196,208,258,287,324,354,125,0,40,181,97,358,213,332,114,59,28,367,121,234,136,109,81,33,387,346,190,320,350,187,304,95,216,175,92,117,220,214,35,378,43,73,372,254};
  int sorted_arr[] = {0,6,10,18,22,28,33,35,36,37,39,40,41,43,59,63,65,68,73,75,81,87,90,92,93,95,97,103,107,109,111,114,117,120,121,125,130,136,137,152,157,159,161,175,181,183,187,189,190,191,196,202,205,208,211,213,214,216,217,219,220,228,229,232,234,239,243,253,254,258,270,272,273,287,290,292,293,304,307,320,324,328,332,339,341,343,346,348,350,354,357,358,367,368,372,374,378,385,387,400};
  int arr_count = 100;*/

  /*int arr[] = {414,576,490,153,688,977,967,420,181,617,695,734,500,522,936,607,341,360,588,561,425,803,748,511,296,95,537,779,506,370,306,969,253,917,954,320,402,190,427,128,4,342,754,539,113,35,171,335,119,1000};
  int arr_count = 50;*/

  /*int arr[] = {153, 329, 345, 394, 60, 6, 241, 147, 54, 277, 194, 64, 262, 187, 121, 158, 325, 339, 57, 190, 154, 231, 275, 378, 282, 212, 274, 33, 400, 26, 110, 9, 344, 224, 348, 286, 197, 235, 150, 355, 280, 93, 0, 18, 103, 238, 223, 318, 55, 45, 88, 69, 237, 30, 330, 74, 188, 248, 4, 16, 136, 62, 375, 215, 322, 233, 220, 321, 128, 300};
  int arr_count = 70;*/

  /*int arr[] = {320, 903, 21, 392, 300, 519, 401, 5, 120, 398, 261, 883, 798, 371, 154, 747, 794, 276, 287, 262, 172, 489, 233, 313, 433, 8, 658, 270, 221, 601, 529, 186, 463, 114, 491, 124, 224, 595, 838, 165, 205, 281, 630, 145, 430, 714, 466, 947, 825, 328, 667, 961, 764, 113, 90, 346, 861, 963, 547, 950, 58, 795, 815, 278, 989, 429, 631, 516, 830, 397, 195, 16, 493, 312, 279, 772, 500, 668, 399, 665};
  int sorted_arr[] = {5,8,16,21,58,90,113,114,120,124,145,154,165,172,186,195,205,221,224,233,261,262,270,276,278,279,281,287,300,312,313,320,328,346,371,392,397,398,399,401,429,430,433,463,466,489,491,493,500,516,519,529,547,595,601,630,631,658,665,667,668,714,747,764,772,794,795,798,815,825,830,838,861,883,903,947,950,961,963,989};
  int arr_count = 80;*/

  /*int arr[] = {5,8,16,21,58,90,113,114,120,124,145,154,165,172,186,195,205,221,224,233,261,262,270,276,278,279,281,287,300,312,313,320,328,346,371,392,397,398,399,401,429,430,433,463,466,489,491,493,500,516,519,529,547,595,601,630,631,658,665,667,668,714,747,764,772,794,795,798,815,825,830,838,861,883,903,947,950,961,963,989};
  int arr_count = 80;*/


  /*int arr[] = {572, 589, 286, 364, 636, 232, 731, 12, 131, 486, 967, 59, 522, 502, 422, 800, 331, 915, 494, 633, 369, 819, 923, 717, 433, 490, 352, 764, 397, 559, 453, 587, 205, 659, 154, 342, 529, 266, 985, 263, 388, 542, 487, 975, 788, 316, 394, 73, 56, 926, 35, 504, 224, 308, 632, 289, 484, 695, 818, 3, 105, 421, 194, 275, 911, 548, 365, 48, 826, 878, 252, 893, 646, 827, 590, 848, 434, 847, 360, 469, 260, 151, 593, 489, 815, 103, 446, 139, 444, 713, 100, 509, 973, 957, 962, 214, 472, 843, 845, 441};
  //int sorted_arr[] = {3,12,35,48,56,59,73,100,103,105,131,139,151,154,194,205,214,224,232,252,260,263,266,275,286,289,308,316,331,342,352,360,364,365,369,388,394,397,421,422,433,434,441,444,446,453,469,472,484,486,487,489,490,494,502,504,509,522,529,542,548,559,572,587,589,590,593,632,633,636,646,659,695,713,717,731,764,788,800,815,818,819,826,827,843,845,847,848,878,893,911,915,923,926,957,962,967,973,975,985};
  int arr_count = 100;*/

  int arr[] = {572, 589, 286, 364, 636, 232, 731, 12, 131, 486, 967, 59, 522, 502, 422, 800, 331, 915, 494, 633, 369, 819, 923, 717, 433, 490, 352, 764, 397, 559, 453, 587, 205, 659, 154, 342, 529, 266, 985, 263, 388, 542, 487, 975, 788, 316, 394, 73, 56, 926, 35, 504, 224, 308, 632, 289, 484, 695, 818, 105, 421, 194, 275, 911, 548, 365, 48, 826, 878, 252, 893, 646, 827, 590, 848, 434, 847, 360, 469, 260, 151, 593, 489, 815, 103, 446, 139, 444, 713, 100, 509, 973, 957,3, 962, 214, 472, 843, 845, 441};
  //int sorted_arr[] = {3,12,35,48,56,59,73,100,103,105,131,139,151,154,194,205,214,224,232,252,260,263,266,275,286,289,308,316,331,342,352,360,364,365,369,388,394,397,421,422,433,434,441,444,446,453,469,472,484,486,487,489,490,494,502,504,509,522,529,542,548,559,572,587,589,590,593,632,633,636,646,659,695,713,717,731,764,788,800,815,818,819,826,827,843,845,847,848,878,893,911,915,923,926,957,962,967,973,975,985};
  int arr_count = 100;

  /*int arr[] = {98,70,195,59,135,29,11,16,198,15,167,31,177,49,159,100,320,227,223,286,368,323,274,318,333,239,250,259,347,314,266,267};
  //int sorted_arr[] = {11,15,16,29,31,49,59,70,98,100,135,159,167,177,195,198,223,227,239,250,259,266,267,274,286,314,318,320,323,333,347,368};
  int arr_count = 32;*/

  /*int arr[] = {9,100,65,22,34,93,18,25,48,33,23,1,29,57,87,85,7,72,98,60,97,20,47,88,24,36};
  //int arr_group[] = {0,0,2,2,0,0,3,2,1,0,3,3,1,0,0,1,0,1,0,1,0,1,0,0,0,1};
  //int need_swap[] = {0,0,2,2,0,0,3,2,1,0,3,3,1,0,0,1,0,1,0,1,0,1,0,0,0,1};
  int arr_count = 26;*/
  
  /*int arr[] = {363, 338, 322, 368, 485, 140, 101, 407, 105, 229, 495, 235, 305, 249, 443, 146, 256, 306, 222, 155, 437, 405, 458, 236, 154, 6, 220, 326, 123, 176, 490, 152, 68, 261, 319, 271, 203, 242, 361, 35, 209, 293, 112, 13, 250, 177, 357, 389, 110, 77, 30, 427, 62, 191, 64, 352, 379, 114, 253, 82, 475, 440, 174, 478, 358, 336, 329, 496, 270, 459, 452, 484, 223, 245, 132, 390, 246, 296, 267, 279, 182, 216, 454, 47, 337, 349, 29, 491, 119, 51, 463, 148, 309, 149, 90, 465, 199, 145, 375, 415, 233, 438, 67, 451, 49, 59, 65, 121, 445, 85, 178, 106, 98, 139, 228, 94, 435, 453, 206, 498, 388, 373, 9, 237, 350, 3, 221, 54, 303, 466, 43, 328, 163, 2, 204, 393, 168, 128, 192, 398, 364, 5, 367, 162, 410, 369, 151, 386, 433, 474, 183, 173, 170, 442, 175, 241, 99, 18, 198, 420, 34, 135, 193, 189, 340, 467, 354, 480, 17, 331, 58, 215, 343, 409, 362, 345, 423, 109, 92, 486, 22, 95, 181, 418, 284, 320, 133, 210, 380, 252, 421, 286, 167, 186, 57, 460, 323, 122, 227, 48, 100, 247, 446, 383, 171, 348, 426, 27, 8, 464, 374, 84, 372, 72, 312, 444, 130, 97, 385, 87, 472, 360, 166, 255, 226, 36, 39, 20, 141, 169, 298, 56, 40, 289, 378, 104, 310, 19, 125, 83, 243, 395, 280, 413, 408, 190, 335, 262, 332, 205, 61, 403, 127, 138, 311, 116, 207, 239, 225, 455, 115, 75, 285, 302, 142, 497, 1, 93, 397, 282, 342, 232, 325, 333, 457, 411, 153, 251, 436, 321, 424, 160, 102, 396, 143, 7, 50, 327, 131, 304, 448, 165, 477, 218, 476, 401, 275, 399, 134, 69, 356, 126, 52, 441, 263, 73, 10, 308, 341, 434, 150, 344, 201, 103, 230, 212, 96, 31, 307, 74, 429, 414, 355, 80, 287, 16, 318, 11, 450, 38, 108, 187, 113, 278, 66, 231, 25, 197, 264, 377, 117, 317, 269, 473, 416, 0, 394, 313, 211, 78, 292, 391, 417, 81, 339, 376, 147, 238, 120, 316, 12, 290, 346, 447, 200, 273, 157, 499, 462, 387, 24, 479, 45, 494, 244, 300, 347, 431, 71, 76, 254, 392, 422, 449, 172, 89, 63, 381, 188, 137, 402, 291, 214, 42, 359, 88, 196, 295, 430, 277, 124, 370, 500, 159, 86, 248, 297, 314, 482, 70, 419, 382, 53, 365, 15, 404, 288, 79, 60, 276, 217, 107, 483, 265, 258, 299, 461, 91, 129, 46, 334, 23, 425, 28, 471, 4, 136, 281, 324, 213, 219, 118, 428, 315, 164, 268, 283, 185, 456, 469, 406, 179, 351, 32, 111, 257, 21, 158, 353, 384, 266, 156, 240, 14, 202, 180, 41, 195, 400, 55, 26, 274, 481, 468, 194, 366, 470, 489, 184, 492, 161, 371, 487, 224, 272, 33, 294, 144, 439, 234, 488, 37, 301, 412, 330, 259, 260, 208, 44, 432};
  //int sorted_arr[] = {0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,488,489,490,491,492,494,495,496,497,498,499,500};
  //int need_swap[] = {0,0,2,2,0,0,3,2,1,0,3,3,1,0,0,1,0,1,0,1,0,1,0,0,0,1};
  int arr_count = 500;*/

  // int arr[] = {10, 15};
  // int arr_count = 2;

  // int arr[] = {10};
  // int arr_count = 1;
  
  int i = 0;
  t_stack stack_a;
  t_stack stack_b;

  stack_b.top = NULL;
  stack_b.count = 0;
  stack_a.top = NULL;
  stack_a.count = 0;

  //numbers for test
  t_num *test_num1 = (t_num *) malloc(sizeof(t_num));
  test_num1->number = 255;
  t_num *test_num2 = (t_num *) malloc(sizeof(t_num));
  test_num2->number = 510;

  t_num *tmp;
  while(i < arr_count)
  {
    if(stack_a.top == NULL)
    {
      tmp = (t_num *) malloc(sizeof(t_num));
      tmp->number = arr[i];
      tmp->group = 0;
      //tmp->index = get_index(sorted_arr, tmp->number, arr_count);
      //tmp->group = arr_group[i];
      stack_a.top = tmp;
      stack_a.count++;
    }
    else{
      tmp->next = (t_num *) malloc(sizeof(t_num));
      tmp->next->previous = tmp;
      tmp = tmp->next;
      tmp->number = arr[i];
      //tmp->index = get_index(sorted_arr, tmp->number, arr_count);
      tmp->group = 0;
      //tmp->group = arr_group[i];
      stack_a.count++;
    } 
    stack_a.top->previous = tmp;
    tmp->next = stack_a.top;
    i++;
  }

  //print_stack(&stack_a, "a");
  //print_stack(&stack_b, "b");

  //printf("====================\n");
  //printf("==== operations ====\n");
  //printf("====================\n");
  //test sa_sb
  //sa_sb(&stack_a, "sa\n");

  //test ss
  //ss(&stack_a, &stack_b);

  //test pop
  /*pop(&stack_a);
  pop(&stack_a);
  pop(&stack_b);
  pop(&stack_b);*/


  //test push
  //push(&stack_a, test_num1);
  /*push(&stack_b, test_num1);
  push(&stack_b, test_num2);*/


  //test pa_pb
  //pa_pb(&stack_a, &stack_b, "pb\n");

  //test ra_rb
  /*ra_rb(&stack_a, "ra\n");
  ra_rb(&stack_b, "rb\n");*/
  
  //test rr
  //rr(&stack_a, &stack_b);

  //test ra_rb
  /*rra_rrb(&stack_a, "ra\n");
  rra_rrb(&stack_b, "rb\n");*/

  //test rrr
  //rrr(&stack_a, &stack_b);


  /*sa(&stack_a);
  pb(&stack_a, &stack_b);
  pb(&stack_a, &stack_b);
  pb(&stack_a, &stack_b);
  ra(&stack_a);
  rb(&stack_b);
  rra(&stack_a);
  rrb(&stack_b);
  sa(&stack_a);
  pa(&stack_b, &stack_a);
  pa(&stack_b, &stack_a);
  pa(&stack_b, &stack_a);*/

  /*print_stack(&stack_a, "a");
  print_stack(&stack_b, "b");*/

  //let's find the smallest number
  /*int target = get_smallest_number(&stack_a);
  printf("the smallest number : %d\n",target);*/
  
  
  //now let's get the biggest number in the first part (part of smallest numbers)
  //t_num *target_b = get_biggest_num_1st_part(&stack_a);
  //printf("the biggest number in the first part : %d\n",target_b->number);

  //push smallest numbers to b
  //split_numbers_biggest_smallest(&stack_a, &stack_b, target_b);
  
  /*print_stack(&stack_a, "a");
  print_stack(&stack_b, "b");*/

  //ft_sort(&stack_a, &stack_b);
  //print_stack(&stack_a, "a");
  //print_stack(&stack_b, "b");

  /*t_stack *s = stack_dup(&stack_a);
  print_stack(s, "a");*/
  
  //int selected_numbers[stack_a.count];
  //t_stack *s = load_best_sorted_list(&stack_a);
  /*int group = 1;
  int all_groups_loaded = 0;
  while(!all_groups_loaded)
  {*/
    load_best_sorted_list(&stack_a, 1);
    //print_stack_by_group(&stack_a, "a", group);
    /*group++;
  }*/
  
  sort_stack(&stack_a, &stack_b);

  //load_best_sorted_list(arr, arr_count);
  //print_stack_by_group(&stack_a, "a", 1);
  //push(s, stack_a.top);
  //print_stack(s, "a");

  /*i = 0;
  int target_group = 1;
  tmp = stack_a.top;
  t_num  *break_num = NULL;
  while(tmp)
  {
    if(tmp->group == target_group){
      pb(&stack_a, &stack_b);
    }
    else{
      if(!break_num)
        break_num = tmp;
      ra(&stack_a);
    }
    tmp = stack_a.top;
    i++;
    if(break_num && break_num->number == tmp->number)
      break;
  }*/
  /*print_stack(&stack_a, "a");
  print_stack(&stack_b, "b");*/
}